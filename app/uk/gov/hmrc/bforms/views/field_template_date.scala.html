@import uk.gov.hmrc.bforms.models.FieldValue
@import uk.gov.hmrc.bforms.models.FormFieldValidationResult
@import uk.gov.hmrc.play.views.html.helpers._

@(fieldValue: FieldValue, validationResult: Option[FormFieldValidationResult], prepop: Option[Tuple3[String, String, String]])

<div class="form-field-group @if(validationResult.map(_.isOk).contains(false)) { form-field-group--error }">
    <fieldset>
        <legend class="h3-heading">@{fieldValue.label}</legend>

        @if(fieldValue.helpText) {
        <div class="form-field--hint">@localisation(fieldValue.helpText.getOrElse(""))</div>
        }

        @errorInline(fieldValue.id.value, "Please enter required data", Seq(""))


        <div class="form-date">
            <div class="form-group">
                <label class="form-label" for="@{fieldValue.id}.day">Day</label>

                <input type="text"
                       name="@{fieldValue.id}.day"
                       id="@{fieldValue.id}.day"
                       @if(validationResult.map(_.getCurrentValue("day")).getOrElse("")==""){
                            value = "@prepop.getOrElse(("","",""))._1"
                        }else{
                            value="@validationResult.map(_.getCurrentValue("day")).getOrElse("")"
                        }

                class="form-control form-control--block"
                required>

            </div>

            <div class="form-group">
                <label class="form-label" for="@{fieldValue.id}.month">Month</label>

                <input type="text"
                       name="@{fieldValue.id}.month"
                       id="@{fieldValue.id}.month"
                       @if(validationResult.map(_.getCurrentValue("month")).getOrElse("")==""){
                             value = "@prepop.getOrElse(("","",""))._2"
                        }else{
                            value="@validationResult.map(_.getCurrentValue("month")).getOrElse("")"
                        }
                class= "form-control form-control--block"
                required>
            </div>

            <div class="form-group form-group-year">
                <label class="form-label" for="@{fieldValue.id}.year">Year</label>

                <input type="text"
                       name="@{fieldValue.id}.year"
                       id="@{fieldValue.id}.year"
                       @if(validationResult.map(_.getCurrentValue("year")).getOrElse("")==""){
                            value = "@prepop.getOrElse(("","",""))._3"
                        }else{
                            value="@validationResult.map(_.getCurrentValue("year")).getOrElse("")"
                        }
                class="form-control form-control--block"
                required>
            </div>
        </div>
    </fieldset>
</div>